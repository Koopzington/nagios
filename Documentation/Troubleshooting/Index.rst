

.. ==================================================
.. FOR YOUR INFORMATION
.. --------------------------------------------------
.. -*- coding: utf-8 -*- with BOM.

.. ==================================================
.. DEFINE SOME TEXTROLES
.. --------------------------------------------------
.. role::   underline
.. role::   typoscript(code)
.. role::   ts(typoscript)
   :class:  typoscript
.. role::   php(code)


Troubleshooting
---------------

This section aims to help pinpointing and solving typical problems. However we have noticed that most issues occurred because system administrators did not read and/or follow the documentation :-)

If you should stumble across a problem that could not being solved by following the instructions and is not covered in this section, feel free to contact us! We are always happy to update the documentation and/or update/fix the software in order to address issues.

The Nagios® server shows nothing: no error, no warning, no “OK”
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

If the Nagios® server shows nothing or just “TYPO3” (depending on the version of the Nagios® plugin you are using), but no error, no warning, no “OK” message, your configuration is incorrect. In most cases the Nagios® server does not get valid data from the TYPO3 server, so you should check what the Nagios® server “sees”. Run the following command on the command line on your Nagios® server (replace “typo3server.com” with the correct server name of your TYPO3 server):

::

   wget --quiet --output-document - "http://typo3server.com/?eID=nagios"

Check how the output looks like (see other troubleshooting points below).

Alternatively, you could access the URL of your TYPO3 server with your browser but keep in mind that the IP address of your machine (e.g. your network at home) has to be allowed to retrieve information from the TYPO3 Nagios® plugin (see chapter :ref:`restrict-access-by-remote-ip-address`).

The output of the extension shows an “access denied” message
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

Ensure, you have added the correct IP address of the Nagios® server to the comma-separated list of allowed Nagios® servers in the extension configuration.

If you double checked the configuration and you still get the “access denied” message, check the web server's access log and find out which IP address tries to access the extension (look for requests such as :php:`“/?eID=nagios”`). Compare this with your configuration.

If the TYPO3 instance has been placed behind a proxy or caching server, load balancer, CDN solution, etc. the IP address accessing the server is unlikely the address of the Nagios® server. Follow the instructions in chapter :ref:`typo3-behind-a-proxy`.

The frontend (output of the extension) shows weired HTML tags
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

It is most likely that you are using the TYPO3 Nagios® extension as a frontend plugin in TYPO3. This method has been discontinued since version 1.2.6 of the extensions. The solution is to use the “eID” method instead of using the extension as a frontend plugin. See chapter :ref:`update` how to update to the eID method.

The frontend (output of the extension) shows a blank white page only
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

Do not use the TYPO3 Nagios® Extension as a frontend plugin in TYPO3. See chapter :ref:`update` how to update to the eID method.

If the problem still exist, search for PHP warnings or PHP fatal errors in the error log file generated by the web server (e.g. "error\_log" when using Apache). You may increase the error reporting level in PHP's configuration. If there are any warnings/errors which apply to the TYPO3 Nagios® Extension, please contact us (this is possibly a bug that was not detected during our tests).

The extension tells me to update to the eID method
""""""""""""""""""""""""""""""""""""""""""""""""""

This usage of the TYPO3 Nagios® Extension as a frontend plugin has been discontinued since version 1.2.6 of the extensions. The switch to the eID method is a simple task. See chapter :ref:`update` how to update to the eID method.

The extension list shows loaded extensions only
"""""""""""""""""""""""""""""""""""""""""""""""

Since version 1.2.5 of the TYPO3 Nagios® extension, imported and loaded extensions as well as imported and not-loaded extensions are included in the extension list by default. If not-loaded extensions are not shown, ensure, you are running at least TYPO3 version 4.5.0 and the appropriate check box in the extension configuration is **not** ticked. See notes in chapter :ref:`configuration` at the appropriate check for further details.

The extension list does not show the TYPO3 dependency in TYPO3 6.2
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

Significant changes of the Extension Manager have been made in TYPO3 version 6.2.x and the dependencies to the min/max TYPO3 version of extensions is not supported in this TYPO3 and Nagios extension version at the moment.

The “disk usage” value seems to be wrong
""""""""""""""""""""""""""""""""""""""""

If the system user (e.g. “www-data”) does not have access to all subdirectories of the TYPO3 root folder, not all data can be counted and the result may be inaccurate. See notes in chapter :ref:`configuration` at the appropriate check.

The “disk usage” is not available on my Microsoft Windows server
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

The “disk usage” checks requires a UNIX/Linux-based system and the command “du” (disk usage) has to be installed. “disk usage” is not available on Microsoft Windows server. See notes in chapter :ref:`configuration` at the appropriate check.

Some characters are missing in the “site name” (e.g. German umlauts)
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

Special characters such as German umlauts, brackets, etc. are filtered. See notes in chapter :ref:`configuration` at the appropriate check for further details.

Usage of deprecated TYPO3 API calls
"""""""""""""""""""""""""""""""""""

The TYPO3 Nagios® extension includes a TYPO3 API call to a function/method, which is marked as deprecated: t3lib\_div::int\_from\_ver(). Therefore, some sources claim, that the extension is incompatible with TYPO3 version 6.0 and newer and does not work. This is not correct.

The API call :php:`t3lib_div::int_from_ver()` is only used, if the extension runs in an old TYPO3 version, which supports this call. In newer TYPO3 versions, the correct new method is called. This logic ensures, that the TYPO3 Nagios® extension is compatible with old as well as with new versions of TYPO3.
